\hypertarget{main_8cpp}{}\section{main.\+cpp File Reference}
\label{main_8cpp}\index{main.\+cpp@{main.\+cpp}}
{\ttfamily \#include $<$ctime$>$}\\*
{\ttfamily \#include $<$chrono$>$}\\*
{\ttfamily \#include $<$iostream$>$}\\*
{\ttfamily \#include $<$boost/program\+\_\+options.\+hpp$>$}\\*
{\ttfamily \#include \char`\"{}gift.\+hpp\char`\"{}}\\*
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{main_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main} (int argc, char $\ast$$\ast$argv)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{main.\+cpp@{main.\+cpp}!main@{main}}
\index{main@{main}!main.\+cpp@{main.\+cpp}}
\subsubsection[{\texorpdfstring{main(int argc, char $\ast$$\ast$argv)}{main(int argc, char **argv)}}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$$\ast$}]{argv}
\end{DoxyParamCaption}
)}\hypertarget{main_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{}\label{main_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}


References gift\+::help\+Gift(), gift\+::out\+Record(), gift\+::\+E\+M\+::out\+Train\+Result(), gift\+::\+E\+M\+::out\+Train\+Variance(), gift\+::\+E\+M\+::predict\+E\+M(), gift\+::parameters\+::task, gift\+::\+E\+M\+::train\+E\+M(), gift\+::update\+Time(), gift\+::\+E\+M\+::var\+E\+M(), and gift\+::version().


\begin{DoxyCode}
25                                 \{
26   \textcolor{keywordflow}{if} (argc < 2)\{
27     \hyperlink{namespacegift_abe7a96fe61b2734ca7a9e17ba2f887ae}{gift::helpGift}();
28     \textcolor{keywordflow}{return} SUCCESS;
29   \} \textcolor{comment}{// end of if.}
30   \textcolor{comment}{// read program options.}
31   std::string configureFileName;
32   \textcolor{comment}{// reference to: radmangames online post.}
33   \textcolor{keywordflow}{try}\{
34     \textcolor{keyword}{namespace }po = boost::program\_options;
35     po::options\_description desc(\textcolor{stringliteral}{"Options"});
36     desc.add\_options()
37       (\textcolor{stringliteral}{"help,h"},\textcolor{stringliteral}{"Print help messages."})
38       (\textcolor{stringliteral}{"version,v"},\textcolor{stringliteral}{"Print version information."})
39       (\textcolor{stringliteral}{"configure,c"},po::value<std::string>(&configureFileName)->required(),
40        \textcolor{stringliteral}{"Read the configure file."});
41     po::variables\_map vm;
42     \textcolor{keywordflow}{try}\{
43       po::store(po::parse\_command\_line(argc, argv, desc), vm);
44       \textcolor{keywordflow}{if}(vm.count(\textcolor{stringliteral}{"help"}) || vm.count(\textcolor{stringliteral}{"-h"})) \{
45         \hyperlink{namespacegift_abe7a96fe61b2734ca7a9e17ba2f887ae}{gift::helpGift}();
46       \} \textcolor{comment}{// end of if}
47       \textcolor{keywordflow}{if}(vm.count(\textcolor{stringliteral}{"version"}) || vm.count(\textcolor{stringliteral}{"-v"})) \{
48         std::cout<<\textcolor{stringliteral}{"GIFT VERSION: "}<<\hyperlink{namespacegift_a5a720324a7e112ad94437108be453df3}{gift::version}<<std::endl;
49         std::cout<<\textcolor{stringliteral}{"UPDATE TIME: "}<<\hyperlink{namespacegift_a5de68828ba8a73f6e0de9f39d06aaa66}{gift::updateTime}<<std::endl;
50       \} \textcolor{comment}{// end of if}
51 
52       po::notify(vm); \textcolor{comment}{// throw an error if there are any problems.}
53 
54     \} \textcolor{keywordflow}{catch}(po::error& e)\{
55       std::cerr<<\textcolor{stringliteral}{"ERROR: "} <<e.what()<<std::endl<<std::endl;
56       std::cerr<< desc <<std::endl;
57       \textcolor{keywordflow}{return} ERROR\_IN\_COMMAND\_LINE;
58     \} \textcolor{comment}{// end of catch}
59   \} \textcolor{keywordflow}{catch}(std::exception& e)\{
60     std::cerr<< \textcolor{stringliteral}{"Unhandled  Exception reached the top of main: "}
61              <<e.what() <<\textcolor{stringliteral}{", gift will now exit."}<<std::endl;
62     \textcolor{keywordflow}{return} ERROR\_UNHANDLED\_EXCEPTION;
63   \} \textcolor{comment}{// end of catch}
64 
65   \textcolor{comment}{// run program based on task.}
66   \textcolor{keywordflow}{try}\{
67     std::cout<<\textcolor{stringliteral}{"Now start running gift..."}<<std::endl;
68     std::chrono::system\_clock::time\_point timeS =
69       std::chrono::system\_clock::now();
70     std::time\_t PtimeS = std::chrono::system\_clock::to\_time\_t(timeS);
71     std::cout<<\textcolor{stringliteral}{"Job start at "}<<std::ctime(&PtimeS)<<std::endl;
72 
73     \hyperlink{classgift_1_1parameters}{gift::parameters} getParameters(configureFileName);
74     \hyperlink{classgift_1_1_e_m}{gift::EM} EMgiftor(getParameters);
75     \textcolor{keywordflow}{if} (getParameters.task.compare(\textcolor{stringliteral}{"predict"}) == 0 ) \{
76       \textcolor{comment}{// check is it enough?}
77       EMgiftor.predictEM();
78       \hyperlink{namespacegift_ac979b293ba5cbc8e11abe5cb82c2aede}{gift::outRecord}(getParameters);
79     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (getParameters.task.compare(\textcolor{stringliteral}{"train"}) == 0)\{
80       \textcolor{comment}{// check is it enough?}
81       EMgiftor.trainEM();
82       EMgiftor.varEM();
83       \textcolor{comment}{// out train result.}
84       \hyperlink{namespacegift_ac979b293ba5cbc8e11abe5cb82c2aede}{gift::outRecord}(getParameters);
85       EMgiftor.outTrainResult();
86       EMgiftor.outTrainVariance();
87     \} \textcolor{keywordflow}{else} \{
88       std::cout<<\textcolor{stringliteral}{"NO TASK IS SPECIFIED."}<<std::endl;
89       \textcolor{keywordflow}{return} ERROR\_IN\_TASK;
90     \} \textcolor{comment}{// end of if else if else.}
91   \} \textcolor{keywordflow}{catch} (\textcolor{keyword}{const} std::string & e)\{
92     std::cerr<<\textcolor{stringliteral}{"ERROR: "}<<e<<std::endl;
93     \textcolor{keywordflow}{return} ERROR\_IN\_READFILE;
94   \}
95   \textcolor{keywordflow}{return} SUCCESS;
96 \} \textcolor{comment}{// end of main}
\end{DoxyCode}
